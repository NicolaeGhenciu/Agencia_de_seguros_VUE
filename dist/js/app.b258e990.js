(function(){"use strict";var a={5007:function(a,e,t){var i=t(6369),o=function(){var a=this,e=a._self._c;return e("div",{attrs:{id:"app"}},[a.$route.meta.requiresAuth?e("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-primary"},[e("div",{staticClass:"container-fluid"},[a._m(0),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[e("ul",{staticClass:"navbar-nav me-auto"},[a._m(1),e("li",{staticClass:"nav-item dropdown"},[a._v("  ")]),e("li",{staticClass:"nav-item dropdown"},[a._m(2),e("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/listarcliente"}},[e("i",{staticClass:"bi bi-people-fill"}),a._v(" Listar Cliente")])],1),e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/listarpoliza"}},[e("i",{staticClass:"bi bi-folder-fill"}),a._v(" Listar Polizas")])],1),e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/listarfiltrado"}},[e("i",{staticClass:"bi bi-search"}),a._v(" Listar Clientes/Polizas filtrando")])],1)])]),e("li",{staticClass:"nav-item dropdown"},[a._m(3),e("ul",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown2"}},[e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/altacliente"}},[e("i",{staticClass:"bi bi-person-fill-add"}),a._v(" Alta Cliente")])],1),e("li",[e("router-link",{staticClass:"dropdown-item",attrs:{to:"/altapoliza"}},[e("i",{staticClass:"bi bi-journal-plus"}),a._v(" Alta Poliza")])],1)])])])]),a._v("   "),e("button",{staticClass:"btn btn-danger",on:{click:a.logout}},[e("i",{staticClass:"bi bi-door-open-fill"}),a._v(" Cerrar sesión ")])])]):a._e(),e("router-view"),a.$route.meta.requiresAuth?e("footer",{staticClass:"d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top"},[a._m(4),a._m(5)]):a._e()],1)},s=[function(){var a=this,e=a._self._c;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])},function(){var a=this,e=a._self._c;return e("li",{staticClass:"nav-item dropdown"},[a._v("     "),e("img",{attrs:{src:"img/logo.png",height:"40px",width:"40px"}})])},function(){var a=this,e=a._self._c;return e("a",{staticClass:"nav-link dropdown-toggle",staticStyle:{color:"black"},attrs:{href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e("b",[e("i",{staticClass:"bi bi-card-checklist"}),a._v(" Listar")])])},function(){var a=this,e=a._self._c;return e("a",{staticClass:"nav-link dropdown-toggle",staticStyle:{color:"black"},attrs:{href:"#",id:"navbarDropdown2",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e("b",[e("i",{staticClass:"bi bi-file-plus"}),a._v(" Insertar")])])},function(){var a=this,e=a._self._c;return e("div",{staticClass:"col-md-4 d-flex align-items-center"},[e("a",{staticClass:"mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1",attrs:{href:"/"}},[a._v("        ")]),e("span",{staticClass:"mb-3 mb-md-0 text-muted"},[a._v("© 2023 Nicolae Adrian Ghenciu")])])},function(){var a=this,e=a._self._c;return e("ul",{staticClass:"nav col-md-4 justify-content-end list-unstyled d-flex"},[e("li",{staticClass:"ms-3"},[e("a",{staticClass:"text-muted",attrs:{href:"#"}},[e("i",{staticClass:"bi bi-github"})])]),e("li",{staticClass:"ms-3"},[e("a",{staticClass:"text-muted",attrs:{href:"#"}},[e("i",{staticClass:"bi bi-facebook"})])]),e("li",{staticClass:"ms-3"},[e("a",{staticClass:"text-muted",attrs:{href:"#"}},[e("i",{staticClass:"bi bi-whatsapp"})])]),e("li",{staticClass:"ms-3"},[e("a",{staticClass:"text-muted",attrs:{href:"#"}})]),e("li",{staticClass:"ms-3"},[e("a",{staticClass:"text-muted",attrs:{href:"#"}})])])}],l=(t(7658),{data(){return{emailUsuario:localStorage.getItem("emailUsuario")}},methods:{logout(){localStorage.removeItem("estoyLogueado"),localStorage.removeItem("emailUsuario"),this.$router.push("/")}}}),r=l,n=t(1001),c=(0,n.Z)(r,o,s,!1,null,null,null),d=c.exports,_=t(2631),v=(t(8260),t(4481),function(){var a=this,e=a._self._c;return e("div",{staticClass:"d-flex align-items-center h-100 mt-5"},[e("div",{staticClass:"card mx-auto",staticStyle:{width:"25rem"}},[e("div",{staticClass:"card-body bg-info"},[e("form",{on:{submit:function(e){return e.preventDefault(),a.login.apply(null,arguments)}}},[e("h3",[a._v("Login AXA Seguros")]),a._m(0),e("div",{staticClass:"form-group mt-3 mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.email,expression:"email"}],staticClass:"form-control form-input",attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:a.email},on:{input:function(e){e.target.composing||(a.email=e.target.value)}}}),a.errorEmail?e("div",{staticClass:"alert alert-danger mt-2"},[a._v(" Email incorrecto ")]):a._e()]),e("div",{staticClass:"form-group mt-4 mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.password,expression:"password"}],staticClass:"form-control form-input",attrs:{type:"password",placeholder:"Contraseña",required:""},domProps:{value:a.password},on:{input:function(e){e.target.composing||(a.password=e.target.value)}}}),a.errorPassword?e("div",{staticClass:"alert alert-danger mt-2"},[a._v(" Contraseña incorrecta ")]):a._e()]),e("button",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit"}},[a._v("Login")])]),e("hr"),e("p",[a._v("Credenciales:")]),a._m(1),a._m(2)])])])}),p=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"text-center"},[e("img",{attrs:{src:"img/logo.png",height:"100px",width:"100px"}})])},function(){var a=this,e=a._self._c;return e("p",[a._v("Email: "),e("b",[a._v("docarmo@gmail.com")])])},function(){var a=this,e=a._self._c;return e("p",[a._v("Contraseña: "),e("b",[a._v("docarmo")])])}],u={data(){return{email:"",password:"",errorEmail:!1,errorPassword:!1}},methods:{async login(){this.errorEmail=!1,this.errorPassword=!1;const a=await fetch("PHP/agencia.php/?login="+this.email),e=await a.json();e.length>0&&e[0].pass===this.password?(localStorage.setItem("estoyLogueado",!0),localStorage.setItem("emailUsuario",this.email),this.$router.push({name:"ListarCliente"})):(this.errorEmail=!0,this.errorPassword=!0,localStorage.removeItem("estoyLogueado"))}}},m=u,b=(0,n.Z)(m,v,p,!1,null,null,null),h=b.exports,f=function(){var a=this,e=a._self._c;return e("div",{attrs:{id:"contenido"}},[e("h3",[a._v("Lista de clientes")]),e("button",{staticClass:"btn btn-primary my-2",on:{click:function(e){a.añadirClienteRuta()}}},[e("i",{staticClass:"bi bi-person-fill-add"}),a._v(" Nuevo Cliente ")]),e("table",{staticClass:"table table-striped table-bordered",attrs:{id:"tabla-clientes"}},[a._m(0),e("tbody",a._l(a.clientes,(function(t){return e("tr",{key:t.id},[e("td",[a._v(a._s(t.nombre))]),e("td",[a._v(a._s(t.apellidos))]),e("td",[a._v(a._s(t.telefono))]),e("td",[a._v(a._s(t.provincia_nombre))]),"empresa"===t.entidad?e("td",[e("i",{staticClass:"bi bi-building"}),a._v(" Empresa ")]):e("td",[e("i",{staticClass:"bi bi-person-fill"}),a._v(" Particular")]),e("td",[e("button",{staticClass:"btn btn-info",on:{click:function(e){return a.verDetalles(t.id)}}},[e("i",{staticClass:"bi bi-eye-fill"})]),a._v("  "),e("button",{staticClass:"btn btn-warning",on:{click:function(e){return a.editarCliente(t.id)}}},[e("i",{staticClass:"bi bi-pencil-square"})]),a._v("  "),e("button",{staticClass:"btn btn-success",on:{click:function(e){return a.nuevaPolizaCliente(t.id)}}},[e("i",{staticClass:"bi bi-journal-plus"})]),a._v("  "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},on:{click:function(e){return a.almacenarCliente(t)}}},[e("i",{staticClass:"bi bi-trash-fill"})])])])})),0)]),e("div",{staticClass:"modal fade",attrs:{id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Confirmación de baja de "),e("b",[a._v(a._s(this.cliente_Almacenado.nombre))]),a._v(" "),e("b",[a._v(a._s(this.cliente_Almacenado.apellidos))])]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),e("div",{staticClass:"modal-body"},[a._v(" ¿Esta seguro de querer dar de baja a este cliente? "),e("p"),e("p",[e("b",[a._v("Nombre:")]),a._v(" "+a._s(this.cliente_Almacenado.nombre))]),e("p",[e("b",[a._v("Apellidos:")]),a._v(" "+a._s(this.cliente_Almacenado.apellidos))]),e("p",[e("b",[a._v("Teléfono:")]),a._v(" "+a._s(this.cliente_Almacenado.telefono))]),e("p",[e("b",[a._v("Localidad:")]),a._v(" "+a._s(this.cliente_Almacenado.localidad))]),e("p",[e("b",[a._v("Código Postal:")]),a._v(" "+a._s(this.cliente_Almacenado.cp))]),e("p",[e("b",[a._v("Provincia:")]),a._v(" "+a._s(this.cliente_Almacenado.provincia_nombre)+" ")]),e("p",[e("b",[a._v("Entidad: ")]),"empresa"===this.cliente_Almacenado.entidad?e("span",[e("i",{staticClass:"bi bi-building"}),a._v(" Empresa")]):e("span",[e("i",{staticClass:"bi bi-person-fill"}),a._v(" Particular")])])]),e("div",{staticClass:"modal-footer"},[a._m(1),e("button",{staticClass:"btn btn-danger",attrs:{"data-bs-dismiss":"modal"},on:{click:function(e){return a.borrarCliente(a.cliente_Almacenado.id)}}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Dar de Baja ")])])])])])])},C=[function(){var a=this,e=a._self._c;return e("thead",{staticClass:"thead-dark"},[e("tr",{staticStyle:{"background-color":"#d8f8e1"}},[e("th",[a._v("Nombre")]),e("th",[a._v("Apellidos")]),e("th",[a._v("Teléfono")]),e("th",[a._v("Provincia")]),e("th",[a._v("Entidad")]),e("th",[a._v("Opciones")])])])},function(){var a=this,e=a._self._c;return e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e("i",{staticClass:"bi bi-arrow-left"}),a._v(" Cerrar ")])}],g=t(7387),z=t.n(g),y=(t(649),t(6744),{data(){return{clientes:[],cliente_Almacenado:[]}},created:function(){this.consultarClientes()},methods:{verDetalles(a){this.$router.push({name:"DetallesCliente",query:{id:a}})},editarCliente(a){this.$router.push({name:"EditarCliente",query:{id:a}})},consultarClientes(){let a=z()("#tabla-clientes").DataTable();a.destroy(),fetch("PHP/agencia.php/?consultar_clientes").then((a=>a.json())).then((a=>{console.log(a),this.clientes=[],"undefined"===typeof a[0].success&&(this.clientes=a),this.$nextTick((function(){z()("#tabla-clientes").DataTable({pageLength:6,lengthMenu:[6,10,25,50,100]})}))})).catch(console.log)},borrarCliente(a){console.log(a),fetch("PHP/agencia.php/?borrar="+a).then((a=>a.json())).then((a=>{console.log(a),this.consultarClientes()})).catch(console.log)},almacenarCliente(a){console.log(a),this.cliente_Almacenado=a},"añadirClienteRuta"(){this.$router.push({name:"AltaCliente"})},nuevaPolizaCliente(a){this.$router.push({name:"NuevaPolizaCliente",query:{id:a}})}}}),P=y,A=(0,n.Z)(P,f,C,!1,null,null,null),k=A.exports,w=function(){var a=this,e=a._self._c;return e("div",{attrs:{id:"contenido"}},[e("h3",[a._v("Lista de polizas")]),e("button",{staticClass:"btn btn-primary my-2",on:{click:function(e){a.añadirPolizaRuta()}}},[e("i",{staticClass:"bi bi-journal-plus"}),a._v(" Nuevo Cliente ")]),e("table",{staticClass:"table table-striped table-bordered",attrs:{id:"tabla-polizas"}},[a._m(0),e("tbody",a._l(a.polizas,(function(t){return e("tr",{key:t.id,style:{backgroundColor:"liquidada"===t.estado?"#ffe4e1":"anulada"===t.estado?"#ff6961":"a_cuenta"===t.estado?"#84b6f4":"cobrada"===t.estado?"#77dd77":"pre-anulada"===t.estado?"#ffca99":""}},[e("td",[e("button",{staticClass:"btn btn-light",on:{click:function(e){return a.verDetalles(t.id_cliente)}}},[e("i",{staticClass:"bi bi-person-vcard"}),a._v(" "),e("b",[a._v(a._s(t.id_cliente))])])]),e("td",[a._v(a._s(t.numero_poliza))]),e("td",[a._v(a._s(t.importe_recibo)+" €")]),e("td",[a._v(a._s(t.fecha))]),e("td",["liquidada"===t.estado?e("span",[a._v("Liquidada")]):a._e(),"anulada"===t.estado?e("span",[a._v("Anulada")]):a._e(),"a_cuenta"===t.estado?e("span",[a._v("A cuenta")]):a._e(),"cobrada"===t.estado?e("span",[a._v("Cobrada")]):a._e(),"pre-anulada"===t.estado?e("span",[a._v("Pre-anulada")]):a._e()]),e("td",[a._v(a._s(t.observaciones))]),e("td",[e("button",{staticClass:"btn btn-warning border border-dark",on:{click:function(e){return a.editarPoliza(t.id)}}},[e("i",{staticClass:"bi bi-pencil-square"})]),a._v("  "),t.estado&&"anulada"!==t.estado?e("button",{staticClass:"btn btn-danger border border-dark",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},on:{click:function(e){return a.almacenarPoliza(t)}}},[e("i",{staticClass:"bi bi-trash-fill"})]):a._e()])])})),0)]),e("div",{staticClass:"modal fade",attrs:{id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[a._m(1),e("div",{staticClass:"modal-body"},[a._v(" ¿Esta seguro de querer anular la poliza "),e("b",[a._v(a._s(this.poliza_Almacenado.id))]),a._v(" ? "),e("p"),e("p",[e("b",[a._v("Cliente ID:")]),a._v(" "+a._s(this.poliza_Almacenado.id_cliente))]),e("p",[e("b",[a._v("Numero poliza:")]),a._v(" "+a._s(this.poliza_Almacenado.numero_poliza)+" ")]),e("p",[e("b",[a._v("Importe de recibo:")]),a._v(" "+a._s(this.poliza_Almacenado.importe_recibo)+" € ")]),e("p",[e("b",[a._v("Fecha:")]),a._v(" "+a._s(a._f("date")(this.poliza_Almacenado.fecha,"DD-MM-YYYY"))+" ")]),e("p",[e("b",[a._v("Estado: ")]),"liquidada"===this.poliza_Almacenado.estado?e("span",[a._v("Liquidada")]):a._e(),"anulada"===this.poliza_Almacenado.estado?e("span",[a._v("Anulada")]):a._e(),"a_cuenta"===this.poliza_Almacenado.estado?e("span",[a._v("A cuenta")]):a._e(),"cobrada"===this.poliza_Almacenado.estado?e("span",[a._v("Cobrada")]):a._e(),"pre-anulada"===this.poliza_Almacenado.estado?e("span",[a._v("Pre-anulada")]):a._e()]),e("p",[e("b",[a._v("Observaciones:")]),a._v(" "+a._s(this.poliza_Almacenado.observaciones)+" ")])]),e("div",{staticClass:"modal-footer"},[a._m(2),e("button",{staticClass:"btn btn-danger",attrs:{"data-bs-dismiss":"modal"},on:{click:function(e){return a.borrarPoliza(a.poliza_Almacenado.id)}}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Anular ")])])])])])])},x=[function(){var a=this,e=a._self._c;return e("thead",{staticClass:"thead-dark"},[e("tr",[e("th",[a._v("Cliente ID")]),e("th",[a._v("Numero Poliza")]),e("th",[a._v("Importe de recibo")]),e("th",[a._v("Fecha")]),e("th",[a._v("Estado")]),e("th",[a._v("Observaciones")]),e("th",[a._v("Opciones")])])])},function(){var a=this,e=a._self._c;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Confirmación de anulacion de poliza ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])},function(){var a=this,e=a._self._c;return e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e("i",{staticClass:"bi bi-arrow-left"}),a._v(" Cerrar ")])}],D={data(){return{polizas:[],poliza_Almacenado:[]}},filters:{date:function(a){return a?new Date(a).toLocaleDateString("es-ES"):""}},created:function(){this.consultarPolizas()},methods:{verDetalles(a){this.$router.push({name:"DetallesCliente",query:{id:a}})},editarPoliza(a){this.$router.push({name:"EditarPoliza",query:{id:a}})},consultarPolizas(){let a=z()("#tabla-polizas").DataTable();a.destroy(),fetch("PHP/agencia.php/?consultar_polizas").then((a=>a.json())).then((a=>{console.log(a),this.polizas=[],"undefined"===typeof a[0].success&&(this.polizas=a),this.$nextTick((function(){z()("#tabla-polizas").DataTable({pageLength:6,lengthMenu:[6,10,25,50,100],order:[[3,"desc"]]})}))})).catch(console.log)},borrarPoliza(a){console.log(a),fetch("PHP/agencia.php/?borrar_poliza="+a).then((a=>a.json())).then((a=>{console.log(a),this.consultarPolizas()})).catch(console.log)},almacenarPoliza(a){console.log(a),this.poliza_Almacenado=a},"añadirPolizaRuta"(){this.$router.push({name:"AltaPoliza"})}}},q=D,N=(0,n.Z)(q,w,x,!1,null,null,null),$=N.exports,S=function(){var a=this,e=a._self._c;return e("div",{attrs:{id:"contenido"}},[e("h3",[a._v("Lista de polizas")]),e("div",{staticClass:"container col-md-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.estadoSeleccionado,expression:"estadoSeleccionado"}],staticClass:"form-select",on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.estadoSeleccionado=e.target.multiple?t:t[0]}}},[e("option",{attrs:{value:""}},[a._v("Todo")]),e("option",{attrs:{value:"liquidada"}},[a._v("Liquidada")]),e("option",{attrs:{value:"anulada"}},[a._v("Anulada")]),e("option",{attrs:{value:"a_cuenta"}},[a._v("A cuenta")]),e("option",{attrs:{value:"cobrada"}},[a._v("Cobrada")]),e("option",{attrs:{value:"pre-anulada"}},[a._v("Pre-anulada")])])]),e("br"),e("table",{staticClass:"table table-striped table-bordered",attrs:{id:"tabla-polizas"}},[a._m(0),e("tbody",a._l(a.polizas.filter(a.polizaEstadoSeleccionado),(function(t){return e("tr",{key:t.id,class:{"bg-warning":"liquidada"===t.estado,"bg-danger":"anulada"===t.estado,"bg-info":"a_cuenta"===t.estado,"bg-success":"cobrada"===t.estado,"bg-primary":"pre-anulada"===t.estado}},[e("td",[a._v(a._s(t.id))]),e("td",[e("button",{staticClass:"btn btn-light",on:{click:function(e){return a.verDetalles(t.id_cliente)}}},[a._v(" "+a._s(t.id_cliente)+" ")])]),e("td",[a._v(a._s(t.numero_poliza))]),e("td",[a._v(a._s(t.importe_recibo)+" €")]),e("td",[a._v(a._s(a._f("date")(t.fecha,"DD-MM-YYYY")))]),e("td",["liquidada"===t.estado?e("span",[a._v("Liquidada")]):a._e(),"anulada"===t.estado?e("span",[a._v("Anulada")]):a._e(),"a_cuenta"===t.estado?e("span",[a._v("A cuenta")]):a._e(),"cobrada"===t.estado?e("span",[a._v("Cobrada")]):a._e(),"pre-anulada"===t.estado?e("span",[a._v("Pre-anulada")]):a._e()]),e("td",[a._v(a._s(t.observaciones))]),e("td",[e("button",{staticClass:"btn btn-warning border border-dark",on:{click:function(e){return a.editarPoliza(t.id)}}},[e("i",{staticClass:"bi bi-pencil-square"})]),a._v("  "),e("button",{staticClass:"btn btn-danger border border-dark",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},on:{click:function(e){return a.almacenarPoliza(t)}}},[e("i",{staticClass:"bi bi-trash-fill"})])])])})),0)]),e("div",{staticClass:"modal fade",attrs:{id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[a._m(1),e("div",{staticClass:"modal-body"},[a._v(" ¿Esta seguro de querer anular la poliza "),e("b",[a._v(a._s(this.poliza_Almacenado.id))]),a._v(" ? "),e("p"),e("p",[e("b",[a._v("Cliente ID:")]),a._v(" "+a._s(this.poliza_Almacenado.id_cliente))]),e("p",[e("b",[a._v("Numero poliza:")]),a._v(" "+a._s(this.poliza_Almacenado.numero_poliza)+" ")]),e("p",[e("b",[a._v("Importe de recibo:")]),a._v(" "+a._s(this.poliza_Almacenado.importe_recibo)+" € ")]),e("p",[e("b",[a._v("Fecha:")]),a._v(" "+a._s(a._f("date")(this.poliza_Almacenado.fecha,"DD-MM-YYYY"))+" ")]),e("p",[e("b",[a._v("Estado: ")]),"liquidada"===this.poliza_Almacenado.estado?e("span",[a._v("Liquidada")]):a._e(),"anulada"===this.poliza_Almacenado.estado?e("span",[a._v("Anulada")]):a._e(),"a_cuenta"===this.poliza_Almacenado.estado?e("span",[a._v("A cuenta")]):a._e(),"cobrada"===this.poliza_Almacenado.estado?e("span",[a._v("Cobrada")]):a._e(),"pre-anulada"===this.poliza_Almacenado.estado?e("span",[a._v("Pre-anulada")]):a._e()]),e("p",[e("b",[a._v("Observaciones:")]),a._v(" "+a._s(this.poliza_Almacenado.observaciones)+" ")])]),e("div",{staticClass:"modal-footer"},[a._m(2),e("button",{staticClass:"btn btn-danger",attrs:{"data-bs-dismiss":"modal"},on:{click:function(e){return a.borrarPoliza(a.poliza_Almacenado.id)}}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Anular ")])])])])])])},E=[function(){var a=this,e=a._self._c;return e("thead",{staticClass:"thead-dark"},[e("tr",[e("th",[a._v("ID")]),e("th",[a._v("Cliente ID")]),e("th",[a._v("Numero Poliza")]),e("th",[a._v("Importe de recibo")]),e("th",[a._v("Fecha")]),e("th",[a._v("Estado")]),e("th",[a._v("Observaciones")]),e("th",[a._v("Opciones")])])])},function(){var a=this,e=a._self._c;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Confirmación de anulacion de poliza ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])},function(){var a=this,e=a._self._c;return e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e("i",{staticClass:"bi bi-arrow-left"}),a._v(" Cerrar ")])}],L={data(){return{polizas:[],poliza_Almacenado:[],estadoSeleccionado:""}},filters:{date:function(a){return a?new Date(a).toLocaleDateString("es-ES"):""}},created:function(){this.consultarPolizas()},methods:{polizaEstadoSeleccionado(a){return""==this.estadoSeleccionado?a.estado:a.estado===this.estadoSeleccionado},verDetalles(a){this.$router.push({name:"DetallesCliente",query:{id:a}})},editarPoliza(a){this.$router.push({name:"EditarPoliza",query:{id:a}})},consultarPolizas(){fetch("PHP/agencia.php/?consultar_polizas").then((a=>a.json())).then((a=>{console.log(a),this.polizas=[],"undefined"===typeof a[0].success&&(this.polizas=a)}))},borrarPoliza(a){console.log(a),fetch("PHP/agencia.php/?borrar_poliza="+a).then((a=>a.json())).then((a=>{console.log(a),this.consultarPolizas()})).catch(console.log)},almacenarPoliza(a){console.log(a),this.poliza_Almacenado=a}}},j=L,O=(0,n.Z)(j,S,E,!1,null,null,null),I=O.exports,H=function(){var a=this,e=a._self._c;return e("div",{attrs:{id:"contenido"}},[e("h3",[a._v("Filtrar por:")]),e("hr"),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"provincias"}},[a._v("Provincia:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:a.provinciaSeleccionada,expression:"provinciaSeleccionada"}],staticClass:"form-select",attrs:{id:"provincias"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.provinciaSeleccionada=e.target.multiple?t:t[0]}}},[e("option",{attrs:{value:""}},[a._v("Todo")]),a._l(a.provincias,(function(t){return e("option",{key:t.id,domProps:{value:t.id}},[a._v(" "+a._s(t.provincia)+" ")])}))],2)])]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"entidades"}},[a._v("Entidad:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:a.entidadSeleccionada,expression:"entidadSeleccionada"}],staticClass:"form-select",attrs:{id:"entidades"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.entidadSeleccionada=e.target.multiple?t:t[0]}}},[e("option",{attrs:{value:""}},[a._v("Todo")]),e("option",{attrs:{value:"empresa"}},[a._v("Empresa")]),e("option",{attrs:{value:"particular"}},[a._v("Particular")])])])]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"fechaDesde"}},[a._v("Desde:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.fechaDesde,expression:"fechaDesde"}],staticClass:"form-control",attrs:{type:"date",id:"fechaDesde"},domProps:{value:a.fechaDesde},on:{input:function(e){e.target.composing||(a.fechaDesde=e.target.value)}}})])]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"fechaHasta"}},[a._v("Hasta:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.fechaHasta,expression:"fechaHasta"}],staticClass:"form-control",attrs:{type:"date",id:"fechaHasta"},domProps:{value:a.fechaHasta},on:{input:function(e){e.target.composing||(a.fechaHasta=e.target.value)}}})])]),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"estado"}},[a._v("Estado:")]),e("select",{directives:[{name:"model",rawName:"v-model",value:a.estadoSeleccionado,expression:"estadoSeleccionado"}],staticClass:"form-select",attrs:{id:"estado"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.estadoSeleccionado=e.target.multiple?t:t[0]}}},[e("option",{attrs:{value:""}},[a._v("Todo")]),e("option",{attrs:{value:"liquidada"}},[a._v("Liquidada")]),e("option",{attrs:{value:"anulada"}},[a._v("Anulada")]),e("option",{attrs:{value:"a_cuenta"}},[a._v("A cuenta")]),e("option",{attrs:{value:"cobrada"}},[a._v("Cobrada")]),e("option",{attrs:{value:"pre-anulada"}},[a._v("Pre-anulada")])])])])])]),e("hr"),e("h3",[a._v("Lista de clientes")]),e("table",{staticClass:"table table-striped table-bordered",attrs:{id:"tabla-clientes"}},[a._m(0),e("tbody",a._l(a.clientesFiltrados,(function(t){return e("tr",{key:t.id},[e("td",[a._v(a._s(t.nombre))]),e("td",[a._v(a._s(t.apellidos))]),e("td",[a._v(a._s(t.telefono))]),e("td",[a._v(a._s(t.provincia_nombre))]),"empresa"===t.entidad?e("td",[e("i",{staticClass:"bi bi-building"}),a._v(" Empresa ")]):e("td",[e("i",{staticClass:"bi bi-person-fill"}),a._v(" Particular")]),e("td",[e("button",{staticClass:"btn btn-info",on:{click:function(e){return a.verDetalles(t.id)}}},[e("i",{staticClass:"bi bi-eye-fill"})]),a._v("  "),e("button",{staticClass:"btn btn-warning",on:{click:function(e){return a.editarCliente(t.id)}}},[e("i",{staticClass:"bi bi-pencil-square"})]),a._v("  "),e("button",{staticClass:"btn btn-success",on:{click:function(e){return a.nuevaPolizaCliente(t.id)}}},[e("i",{staticClass:"bi bi-journal-plus"})]),a._v("  "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},on:{click:function(e){return a.almacenarCliente(t)}}},[e("i",{staticClass:"bi bi-trash-fill"})])])])})),0)]),e("hr"),e("h3",[a._v("Lista de polizas")]),e("table",{staticClass:"table table-striped table-bordered",attrs:{id:"tabla-polizas"}},[a._m(1),e("tbody",a._l(a.polizasFiltradas,(function(t){return e("tr",{key:t.id,style:{backgroundColor:"liquidada"===t.estado?"#77dd77":"anulada"===t.estado||"a_cuenta"===t.estado||"cobrada"===t.estado||"pre-anulada"===t.estado?"#ff6961":""}},[e("td",[e("button",{staticClass:"btn btn-light",on:{click:function(e){return a.verDetalles(t.id_cliente)}}},[e("i",{staticClass:"bi bi-person-vcard"}),a._v(" "),e("b",[a._v(a._s(t.id_cliente))])])]),e("td",[a._v(a._s(t.numero_poliza))]),e("td",[a._v(a._s(t.importe_recibo)+" €")]),e("td",[a._v(a._s(a._f("date")(t.fecha,"DD-MM-YYYY")))]),e("td",["liquidada"===t.estado?e("span",[a._v("Liquidada")]):a._e(),"anulada"===t.estado?e("span",[a._v("Anulada")]):a._e(),"a_cuenta"===t.estado?e("span",[a._v("A cuenta")]):a._e(),"cobrada"===t.estado?e("span",[a._v("Cobrada")]):a._e(),"pre-anulada"===t.estado?e("span",[a._v("Pre-anulada")]):a._e()]),e("td",[a._v(a._s(t.observaciones))]),e("td",[e("button",{staticClass:"btn btn-warning border border-dark",on:{click:function(e){return a.editarPoliza(t.id)}}},[e("i",{staticClass:"bi bi-pencil-square"})]),a._v("  "),t.estado&&"anulada"!==t.estado?e("button",{staticClass:"btn btn-danger border border-dark",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrope"},on:{click:function(e){return a.almacenarPoliza(t)}}},[e("i",{staticClass:"bi bi-trash-fill"})]):a._e()])])})),0)]),e("div",{staticClass:"modal fade",attrs:{id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Confirmación de baja de "),e("b",[a._v(a._s(this.cliente_Almacenado.nombre))]),a._v(" "),e("b",[a._v(a._s(this.cliente_Almacenado.apellidos))])]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),e("div",{staticClass:"modal-body"},[a._v(" ¿Esta seguro de querer dar de baja a este cliente? "),e("p"),e("p",[e("b",[a._v("Nombre:")]),a._v(" "+a._s(this.cliente_Almacenado.nombre))]),e("p",[e("b",[a._v("Apellidos:")]),a._v(" "+a._s(this.cliente_Almacenado.apellidos))]),e("p",[e("b",[a._v("Teléfono:")]),a._v(" "+a._s(this.cliente_Almacenado.telefono))]),e("p",[e("b",[a._v("Localidad:")]),a._v(" "+a._s(this.cliente_Almacenado.localidad))]),e("p",[e("b",[a._v("Código Postal:")]),a._v(" "+a._s(this.cliente_Almacenado.cp))]),e("p",[e("b",[a._v("Provincia:")]),a._v(" "+a._s(this.cliente_Almacenado.provincia_nombre)+" ")]),e("p",[e("b",[a._v("Entidad: ")]),"empresa"===this.cliente_Almacenado.entidad?e("span",[e("i",{staticClass:"bi bi-building"}),a._v(" Empresa")]):e("span",[e("i",{staticClass:"bi bi-person-fill"}),a._v(" Particular")])])]),e("div",{staticClass:"modal-footer"},[a._m(2),e("button",{staticClass:"btn btn-danger",attrs:{"data-bs-dismiss":"modal"},on:{click:function(e){return a.borrarCliente(a.cliente_Almacenado.id)}}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Dar de Baja ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"staticBackdrope","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[a._m(3),e("div",{staticClass:"modal-body"},[a._v(" ¿Esta seguro de querer anular la poliza "),e("b",[a._v(a._s(this.poliza_Almacenado.id))]),a._v(" ? "),e("p"),e("p",[e("b",[a._v("Cliente ID:")]),a._v(" "+a._s(this.poliza_Almacenado.id_cliente))]),e("p",[e("b",[a._v("Numero poliza:")]),a._v(" "+a._s(this.poliza_Almacenado.numero_poliza)+" ")]),e("p",[e("b",[a._v("Importe de recibo:")]),a._v(" "+a._s(this.poliza_Almacenado.importe_recibo)+" € ")]),e("p",[e("b",[a._v("Fecha:")]),a._v(" "+a._s(a._f("date")(this.poliza_Almacenado.fecha,"DD-MM-YYYY"))+" ")]),e("p",[e("b",[a._v("Estado: ")]),"liquidada"===this.poliza_Almacenado.estado?e("span",[a._v("Liquidada")]):a._e(),"anulada"===this.poliza_Almacenado.estado?e("span",[a._v("Anulada")]):a._e(),"a_cuenta"===this.poliza_Almacenado.estado?e("span",[a._v("A cuenta")]):a._e(),"cobrada"===this.poliza_Almacenado.estado?e("span",[a._v("Cobrada")]):a._e(),"pre-anulada"===this.poliza_Almacenado.estado?e("span",[a._v("Pre-anulada")]):a._e()]),e("p",[e("b",[a._v("Observaciones:")]),a._v(" "+a._s(this.poliza_Almacenado.observaciones)+" ")])]),e("div",{staticClass:"modal-footer"},[a._m(4),e("button",{staticClass:"btn btn-danger",attrs:{"data-bs-dismiss":"modal"},on:{click:function(e){return a.borrarPoliza(a.poliza_Almacenado.id)}}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Anular ")])])])])])])},T=[function(){var a=this,e=a._self._c;return e("thead",{staticClass:"thead-dark"},[e("tr",{staticStyle:{"background-color":"#d8f8e1"}},[e("th",[a._v("Nombre")]),e("th",[a._v("Apellidos")]),e("th",[a._v("Teléfono")]),e("th",[a._v("Provincia")]),e("th",[a._v("Entidad")]),e("th",[a._v("Opciones")])])])},function(){var a=this,e=a._self._c;return e("thead",{staticClass:"thead-dark"},[e("tr",[e("th",[a._v("Cliente")]),e("th",[a._v("Numero Poliza")]),e("th",[a._v("Importe de recibo")]),e("th",[a._v("Fecha")]),e("th",[a._v("Estado")]),e("th",[a._v("Observaciones")]),e("th",[a._v("Opciones")])])])},function(){var a=this,e=a._self._c;return e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e("i",{staticClass:"bi bi-arrow-left"}),a._v(" Cerrar ")])},function(){var a=this,e=a._self._c;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Confirmación de anulacion de poliza ")]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})])},function(){var a=this,e=a._self._c;return e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e("i",{staticClass:"bi bi-arrow-left"}),a._v(" Cerrar ")])}],B={data(){return{clientes:[],cliente_Almacenado:[],provincias:[],polizas:[],poliza_Almacenado:[],entidadSeleccionada:"",provinciaSeleccionada:"",estadoSeleccionado:"",fechaDesde:null,fechaHasta:null}},filters:{date:function(a){return a?new Date(a).toLocaleDateString("es-ES"):""}},created:function(){this.consultarClientes(),this.consultar_provincia(),this.consultarPolizas()},computed:{polizasFiltradas(){const a=this.clientes.filter((a=>{let e=!1,t=!1;return this.entidadSeleccionada&&a.entidad!==this.entidadSeleccionada||(e=!0),this.provinciaSeleccionada&&a.provincia!==this.provinciaSeleccionada||(t=!0),e&&t}));return this.polizas.filter((e=>{const t=new Date(e.fecha),i=this.fechaDesde?new Date(this.fechaDesde):null,o=this.fechaHasta?new Date(this.fechaHasta):null,s=!i||t>=i,l=!o||t<=o,r=a.some((a=>a.id===e.id_cliente));return this.estadoSeleccionado?r&&s&&l&&e.estado===this.estadoSeleccionado:r&&s&&l}))},clientesFiltrados(){return this.clientes.filter((a=>{let e=!1,t=!1;return console.log(this.entidadSeleccionada),console.log(this.provinciaSeleccionada),this.entidadSeleccionada&&a.entidad!==this.entidadSeleccionada||(e=!0),this.provinciaSeleccionada&&a.provincia!==this.provinciaSeleccionada||(t=!0),e&&t}))}},methods:{verDetalles(a){this.$router.push({name:"DetallesCliente",query:{id:a}})},editarCliente(a){this.$router.push({name:"EditarCliente",query:{id:a}})},editarPoliza(a){this.$router.push({name:"EditarPoliza",query:{id:a}})},borrarPoliza(a){console.log(a),fetch("PHP/agencia.php/?borrar_poliza="+a).then((a=>a.json())).then((a=>{console.log(a),this.consultarPolizas()})).catch(console.log)},almacenarPoliza(a){console.log(a),this.poliza_Almacenado=a},consultarClientes(){fetch("PHP/agencia.php/?consultar_clientes").then((a=>a.json())).then((a=>{console.log(a),this.clientes=[],"undefined"===typeof a[0].success&&(this.clientes=a)})).catch(console.log)},borrarCliente(a){console.log(a),fetch("PHP/agencia.php/?borrar="+a).then((a=>a.json())).then((a=>{console.log(a),this.consultarClientes()})).catch(console.log)},almacenarCliente(a){console.log(a),this.cliente_Almacenado=a},"añadirClienteRuta"(){this.$router.push({name:"AltaCliente"})},nuevaPolizaCliente(a){this.$router.push({name:"NuevaPolizaCliente",query:{id:a}})},async consultar_provincia(){const a=await fetch("PHP/agencia.php/?consultar_provincias"),e=await a.json();this.provincias=e},consultarPolizas(){fetch("PHP/agencia.php/?consultar_polizas").then((a=>a.json())).then((a=>{console.log(a),this.polizas=[],"undefined"===typeof a[0].success&&(this.polizas=a)})).catch(console.log)}}},Y=B,F=(0,n.Z)(Y,H,T,!1,null,null,null),M=F.exports,Z=function(){var a=this,e=a._self._c;return e("div",{staticClass:"card m-5"},[a._m(0),e("form",{staticClass:"row g-3 m-4"},[e("div",{staticClass:"col-md-3"},[a._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.nombre,expression:"cliente.nombre"}],staticClass:"form-control",attrs:{type:"text",id:"nombre",placeholder:"Ingrese el nombre del cliente"},domProps:{value:a.cliente.nombre},on:{input:function(e){e.target.composing||a.$set(a.cliente,"nombre",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_nombre"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_nombre"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.apellidos,expression:"cliente.apellidos"}],staticClass:"form-control",attrs:{type:"text",id:"apellidos",placeholder:"Ingrese los apellidos del cliente"},domProps:{value:a.cliente.apellidos},on:{input:function(e){e.target.composing||a.$set(a.cliente,"apellidos",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_apellidos"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_apellidos"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(3),e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.telefono,expression:"cliente.telefono"}],staticClass:"form-control",attrs:{type:"number",id:"telefono",placeholder:"Ingrese el teléfono del cliente"},domProps:{value:a.cliente.telefono},on:{input:function(e){e.target.composing||a.$set(a.cliente,"telefono",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_telefono"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_telefono"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(4),e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.cp,expression:"cliente.cp"}],staticClass:"form-control",attrs:{type:"number",id:"cp",placeholder:"Ingrese el código postal del cliente"},domProps:{value:a.cliente.cp},on:{input:function(e){e.target.composing||a.$set(a.cliente,"cp",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_cp"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_cp"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(5),e("select",{directives:[{name:"model",rawName:"v-model",value:a.cliente.provincia,expression:"cliente.provincia"}],staticClass:"form-select",attrs:{id:"provincia"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.cliente,"provincia",e.target.multiple?t:t[0])}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[a._v("Seleccione una provincia")]),a._l(a.provincias,(function(t){return e("option",{key:t.provincia,domProps:{value:t.id}},[a._v(" "+a._s(t.provincia)+" ")])}))],2),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_provincia"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_provincia"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(6),e("select",{directives:[{name:"model",rawName:"v-model",value:a.cliente.localidad,expression:"cliente.localidad"}],staticClass:"form-select",attrs:{id:"localidad"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.cliente,"localidad",e.target.multiple?t:t[0])}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[a._v("Seleccione una localidad")]),a._l(a.municipios,(function(t){return e("option",{key:t.municipio,domProps:{value:t.municipio}},[a._v(" "+a._s(t.municipio)+" ")])}))],2),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_localidad"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_localidad"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(7),e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.entidad,expression:"cliente.entidad"}],staticClass:"form-check-input",attrs:{type:"radio",id:"entidad",value:"empresa"},domProps:{checked:a._q(a.cliente.entidad,"empresa")},on:{change:function(e){return a.$set(a.cliente,"entidad","empresa")}}}),e("i",{staticClass:"bi bi-building"}),a._v(" Empresa ")]),e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.entidad,expression:"cliente.entidad"}],staticClass:"form-check-input",attrs:{type:"radio",id:"entidad",value:"particular"},domProps:{checked:a._q(a.cliente.entidad,"particular")},on:{change:function(e){return a.$set(a.cliente,"entidad","particular")}}}),e("i",{staticClass:"bi bi-person-fill"}),a._v(" Particular ")]),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_entidad"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_entidad"]))])]):a._e()])]),e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-warning",on:{click:function(e){return a.$router.back()}}},[e("i",{staticClass:"bi bi-x-circle"}),a._v(" Cancelar ")]),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),a.agregarRegistro.apply(null,arguments)}}},[e("i",{staticClass:"bi bi-sd-card"}),a._v(" Guardar ")])])])])},R=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"card-header"},[e("b",[a._v("Formulario alta de cliente")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"nombre"}},[e("b",[a._v("Nombre:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"apellidos"}},[e("b",[a._v("Apellidos:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"telefono"}},[e("b",[a._v("Teléfono:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"cp"}},[e("b",[a._v("Código Postal:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"provincia"}},[e("b",[a._v("Provincia:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"localidad"}},[e("b",[a._v("Localidad:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"entidad"}},[e("b",[a._v("Entidad:")])])}],U={data(){return{cliente:{nombre:"",apellidos:"",telefono:"",localidad:"",cp:"",provincia:"",provincia_nombre:"",entidad:"",estado:"alta"},provincias:[],municipios:[],hay_error:!1,errores_de_validacion:{validacion_nombre:"",validacion_apellidos:"",validacion_telefono:"",validacion_localidad:"",validacion_cp:"",validacion_provincia:"",validacion_entidad:"",validacion_estado:""}}},methods:{async agregarRegistro(){const a=this.provincias.find((a=>a.id===this.cliente.provincia));if(this.cliente.provincia_nombre=a.provincia,console.log(this.cliente),this.validacion(),0==this.hay_error){const a=await fetch("PHP/agencia.php/?insertar=1",{method:"POST",body:JSON.stringify(this.cliente),headers:{"Content-Type":"application/json"}}),e=await a.json();console.log(e),this.$router.push({name:"ListarCliente"})}},async consultar_provincia(){const a=await fetch("PHP/agencia.php/?consultar_provincias"),e=await a.json();this.provincias=e},async consultar_municipios(){console.log(this.cliente.provincia);const a=await fetch(`PHP/agencia.php/?consultar_municipios=${this.cliente.provincia}`),e=await a.json();this.municipios=e,console.log(this.municipios)},validacion(){""==this.cliente.nombre||""==this.cliente.apellidos||""==this.cliente.telefono||""==this.cliente.cp||""==this.cliente.provincia||""==this.cliente.localidad||""==this.cliente.entidad?(""==this.cliente.nombre?(this.hay_error=!0,this.errores_de_validacion["validacion_nombre"]="Nombre no puede estar vacio"):this.errores_de_validacion["validacion_nombre"]="",""==this.cliente.apellidos?(this.hay_error=!0,this.errores_de_validacion["validacion_apellidos"]="Apellidos no puede estar vacio"):this.errores_de_validacion["validacion_apellidos"]="",""==this.cliente.telefono?(this.hay_error=!0,this.errores_de_validacion["validacion_telefono"]="Telefono no puede estar vacio"):this.errores_de_validacion["validacion_telefono"]="",""==this.cliente.cp?(this.hay_error=!0,this.errores_de_validacion["validacion_cp"]="Código postal no puede estar vacio"):this.errores_de_validacion["validacion_cp"]="",""==this.cliente.provincia?(this.hay_error=!0,this.errores_de_validacion["validacion_provincia"]="Provincia no puede estar vacio"):this.errores_de_validacion["validacion_provincia"]="",""==this.cliente.localidad?(this.hay_error=!0,this.errores_de_validacion["validacion_localidad"]="Localidad no puede estar vacio"):this.errores_de_validacion["validacion_localidad"]="",""==this.cliente.entidad?(this.hay_error=!0,this.errores_de_validacion["validacion_entidad"]="Entidad no puede estar sin seleccionar"):this.errores_de_validacion["validacion_entidad"]=""):this.hay_error=!1}},watch:{"cliente.provincia":function(){this.consultar_municipios()}},mounted(){this.consultar_provincia()}},G=U,J=(0,n.Z)(G,Z,R,!1,null,null,null),V=J.exports,X=function(){var a=this,e=a._self._c;return e("div",{staticClass:"card m-5"},[a._m(0),e("form",{staticClass:"row g-3 m-4"},[e("div",{staticClass:"col-md-3"},[a._m(1),e("select",{directives:[{name:"model",rawName:"v-model",value:a.poliza.id_cliente,expression:"poliza.id_cliente"}],staticClass:"form-select",attrs:{id:"id_cliente"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.poliza,"id_cliente",e.target.multiple?t:t[0])}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[a._v("Seleccione un cliente")]),a._l(a.clientes,(function(t){return e("option",{key:t.id,domProps:{value:t.id}},[a._v(" "+a._s(t.nombre+" "+t.apellidos)+" ")])}))],2),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_id_cliente"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_id_cliente"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:a.poliza.numero_poliza,expression:"poliza.numero_poliza"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Ingresa el número de la póliza",id:"numero_poliza"},domProps:{value:a.poliza.numero_poliza},on:{input:function(e){e.target.composing||a.$set(a.poliza,"numero_poliza",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_numero_poliza"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_numero_poliza"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[e("input-group",[e("label",{attrs:{for:"importe_recibo"}},[e("b",[a._v("Importe recibo:")])]),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.poliza.importe_recibo,expression:"poliza.importe_recibo"}],staticClass:"form-control",attrs:{type:"number",placeholder:"0",id:"importe_recibo"},domProps:{value:a.poliza.importe_recibo},on:{input:function(e){e.target.composing||a.$set(a.poliza,"importe_recibo",e.target.value)}}}),e("span",{staticClass:"input-group-text"},[a._v("€")])]),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_importe_recibo"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_importe_recibo"]))])]):a._e()])])],1),e("div",{staticClass:"col-md-3"},[a._m(3),e("input",{directives:[{name:"model",rawName:"v-model",value:a.poliza.fecha,expression:"poliza.fecha"}],staticClass:"form-control",attrs:{type:"date",id:"fecha"},domProps:{value:a.poliza.fecha},on:{input:function(e){e.target.composing||a.$set(a.poliza,"fecha",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[a.errores_de_validacion["validacion_fecha"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_fecha"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(4),e("select",{directives:[{name:"model",rawName:"v-model",value:a.poliza.estado,expression:"poliza.estado"}],staticClass:"form-select",attrs:{id:"estado"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.poliza,"estado",e.target.multiple?t:t[0])}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[a._v("Seleccione un estado")]),e("option",{attrs:{value:"cobrada"}},[a._v("Cobrada")]),e("option",{attrs:{value:"a_cuenta"}},[a._v("A cuenta")]),e("option",{attrs:{value:"liquidada"}},[a._v("Liquidada")]),e("option",{attrs:{value:"anulada"}},[a._v("Anulada")]),e("option",{attrs:{value:"pre-anulada"}},[a._v("Pre-anulada")])]),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_estado"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_estado"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(5),e("textarea",{directives:[{name:"model",rawName:"v-model",value:a.poliza.observaciones,expression:"poliza.observaciones"}],staticClass:"form-control",attrs:{placeholder:"Escriba aquí cualquier observación adicional",id:"observaciones"},domProps:{value:a.poliza.observaciones},on:{input:function(e){e.target.composing||a.$set(a.poliza,"observaciones",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_observaciones"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_observaciones"]))])]):a._e()])]),e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-warning",on:{click:function(e){return a.$router.back()}}},[e("i",{staticClass:"bi bi-x-circle"}),a._v(" Cancelar ")]),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),a.agregarRegistro.apply(null,arguments)}}},[e("i",{staticClass:"bi bi-sd-card"}),a._v(" Guardar ")])])])])},K=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"card-header"},[e("b",[a._v("Formulario alta poliza")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"id_cliente"}},[e("b",[a._v("Cliente:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"numero_poliza"}},[e("b",[a._v("Numero poliza:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"fecha"}},[e("b",[a._v("Fecha alta:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"estado"}},[e("b",[a._v("Estado")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"observaciones"}},[e("b",[a._v("Observaciones:")])])}],Q={data(){return{poliza:{id_cliente:"",numero_poliza:"",importe_recibo:"",fecha:"",estado:"",observaciones:""},clientes:[],hay_error:!1,errores_de_validacion:{validacion_id_cliente:"",validacion_numero_poliza:"",validacion_importe_recibo:"",validacion_fecha:"",validacion_estado:"",validacion_observaciones:""}}},methods:{async consultar_clientes(){const a=await fetch("PHP/agencia.php/?consultar_clientes"),e=await a.json();this.clientes=e,console.log(this.clientes)},validacion(){if(""==this.poliza.id_cliente||""==this.poliza.numero_poliza||""==this.poliza.importe_recibo||""==this.poliza.fecha||""==this.poliza.estado||""==this.poliza.observaciones){""==this.poliza.id_cliente?(this.hay_error=!0,this.errores_de_validacion["validacion_id_cliente"]="ID cliente no puede estar vacio"):this.errores_de_validacion["validacion_id_cliente"]="",""==this.poliza.numero_poliza?(this.hay_error=!0,this.errores_de_validacion["validacion_numero_poliza"]="Numero poliza no puede estar vacio",console.log("hola")):this.errores_de_validacion["validacion_numero_poliza"]="",""==this.poliza.importe_recibo?(this.hay_error=!0,this.errores_de_validacion["validacion_importe_recibo"]="Importe recibo no puede estar vacio"):this.errores_de_validacion["validacion_importe_recibo"]="";let a=new Date,e=new Date(this.poliza.fecha);e<a||""==this.poliza.fecha?(this.hay_error=!0,this.errores_de_validacion["validacion_fecha"]="La fecha no puede ser anterior ni igual a la de hoy"):this.errores_de_validacion["validacion_fecha"]="",""==this.poliza.estado?(this.hay_error=!0,this.errores_de_validacion["validacion_estado"]="Estado no puede estar vacio"):this.errores_de_validacion["validacion_estado"]="",""==this.poliza.observaciones?(this.hay_error=!0,this.errores_de_validacion["validacion_observaciones"]="Observaciones no puede estar vacio"):this.errores_de_validacion["validacion_observaciones"]=""}else this.hay_error=!1},async agregarRegistro(){if(this.validacion(),0==this.hay_error){console.log(this.poliza);const a=await fetch("PHP/agencia.php/?insertar_poliza=1",{method:"POST",body:JSON.stringify(this.poliza),headers:{"Content-Type":"application/json"}}),e=await a.json();console.log(e),this.$router.push({name:"ListarPoliza"})}}},mounted(){this.consultar_clientes()}},W=Q,aa=(0,n.Z)(W,X,K,!1,null,null,null),ea=aa.exports,ta=function(){var a=this,e=a._self._c;return e("div",{staticClass:"card m-5"},[e("div",{staticClass:"card-header"},[e("b",[e("i",{staticClass:"bi bi-journal-plus"}),a._v(" Nueva poliza para "+a._s(this.nombreCliente))])]),e("form",{staticClass:"row g-3 m-4"},[e("div",{staticClass:"col-md-3"},[a._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:a.poliza.numero_poliza,expression:"poliza.numero_poliza"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Ingresa el número de la póliza",id:"numero_poliza"},domProps:{value:a.poliza.numero_poliza},on:{input:function(e){e.target.composing||a.$set(a.poliza,"numero_poliza",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_numero_poliza"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_numero_poliza"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[e("input-group",[e("label",{attrs:{for:"importe_recibo"}},[e("b",[a._v("Importe recibo:")])]),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.poliza.importe_recibo,expression:"poliza.importe_recibo"}],staticClass:"form-control",attrs:{type:"number",placeholder:"0",id:"importe_recibo"},domProps:{value:a.poliza.importe_recibo},on:{input:function(e){e.target.composing||a.$set(a.poliza,"importe_recibo",e.target.value)}}}),e("span",{staticClass:"input-group-text"},[a._v("€")])]),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_importe_recibo"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_importe_recibo"]))])]):a._e()])])],1),e("div",{staticClass:"col-md-3"},[a._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:a.poliza.fecha,expression:"poliza.fecha"}],staticClass:"form-control",attrs:{type:"date",id:"fecha"},domProps:{value:a.poliza.fecha},on:{input:function(e){e.target.composing||a.$set(a.poliza,"fecha",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[a.errores_de_validacion["validacion_fecha"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_fecha"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(2),e("select",{directives:[{name:"model",rawName:"v-model",value:a.poliza.estado,expression:"poliza.estado"}],staticClass:"form-select",attrs:{id:"estado"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.poliza,"estado",e.target.multiple?t:t[0])}}},[e("option",{attrs:{disabled:"",selected:"",value:""}},[a._v("Seleccione un estado")]),e("option",{attrs:{value:"cobrada"}},[a._v("Cobrada")]),e("option",{attrs:{value:"a_cuenta"}},[a._v("A cuenta")]),e("option",{attrs:{value:"liquidada"}},[a._v("Liquidada")]),e("option",{attrs:{value:"anulada"}},[a._v("Anulada")]),e("option",{attrs:{value:"pre-anulada"}},[a._v("Pre-anulada")])]),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_estado"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_estado"]))])]):a._e()])]),e("div",{staticClass:"col-md-12"},[a._m(3),e("textarea",{directives:[{name:"model",rawName:"v-model",value:a.poliza.observaciones,expression:"poliza.observaciones"}],staticClass:"form-control",attrs:{placeholder:"Escriba aquí cualquier observación adicional",id:"observaciones"},domProps:{value:a.poliza.observaciones},on:{input:function(e){e.target.composing||a.$set(a.poliza,"observaciones",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_observaciones"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_observaciones"]))])]):a._e()])]),e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-warning",on:{click:function(e){return a.$router.go(-1)}}},[e("i",{staticClass:"bi bi-x-circle"}),a._v(" Cancelar ")]),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),a.agregarRegistro.apply(null,arguments)}}},[e("i",{staticClass:"bi bi-sd-card"}),a._v(" Guardar ")])])])])},ia=[function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"numero_poliza"}},[e("b",[a._v("Numero poliza:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"fecha"}},[e("b",[a._v("Fecha alta:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"estado"}},[e("b",[a._v("Estado")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"observaciones"}},[e("b",[a._v("Observaciones:")])])}],oa={data(){return{poliza:{id_cliente:this.$route.query.id,numero_poliza:"",importe_recibo:"",fecha:"",estado:"",observaciones:""},clientes:[],nombreCliente:"",hay_error:!1,errores_de_validacion:{validacion_id_cliente:"",validacion_numero_poliza:"",validacion_importe_recibo:"",validacion_fecha:"",validacion_estado:"",validacion_observaciones:""}}},methods:{async consultar_clientes(){const a=await fetch("PHP/agencia.php/?consultar_clientes"),e=await a.json();this.clientes=e;for(let t=0;t<this.clientes.length;t++)this.clientes[t].id==this.$route.query.id&&(this.nombreCliente=this.clientes[t].nombre+" "+this.clientes[t].apellidos)},validacion(){if(""==this.poliza.id_cliente||""==this.poliza.numero_poliza||""==this.poliza.importe_recibo||""==this.poliza.fecha||""==this.poliza.estado||""==this.poliza.observaciones){""==this.poliza.id_cliente?(this.hay_error=!0,this.errores_de_validacion["validacion_id_cliente"]="ID cliente no puede estar vacio"):this.errores_de_validacion["validacion_id_cliente"]="",""==this.poliza.numero_poliza?(this.hay_error=!0,this.errores_de_validacion["validacion_numero_poliza"]="Numero poliza no puede estar vacio",console.log("hola")):this.errores_de_validacion["validacion_numero_poliza"]="",""==this.poliza.importe_recibo?(this.hay_error=!0,this.errores_de_validacion["validacion_importe_recibo"]="Importe recibo no puede estar vacio"):this.errores_de_validacion["validacion_importe_recibo"]="";let a=new Date,e=new Date(this.poliza.fecha);e<a||""==this.poliza.fecha?(this.hay_error=!0,this.errores_de_validacion["validacion_fecha"]="La fecha no puede ser anterior ni igual a la de hoy"):this.errores_de_validacion["validacion_fecha"]="",""==this.poliza.estado?(this.hay_error=!0,this.errores_de_validacion["validacion_estado"]="Estado no puede estar vacio"):this.errores_de_validacion["validacion_estado"]="",""==this.poliza.observaciones?(this.hay_error=!0,this.errores_de_validacion["validacion_observaciones"]="Observaciones no puede estar vacio"):this.errores_de_validacion["validacion_observaciones"]=""}else this.hay_error=!1},async agregarRegistro(){if(this.validacion(),0==this.hay_error){console.log(this.poliza);const a=await fetch("PHP/agencia.php/?insertar_poliza=1",{method:"POST",body:JSON.stringify(this.poliza),headers:{"Content-Type":"application/json"}}),e=await a.json();console.log(e),this.$router.go(-1)}}},mounted(){this.consultar_clientes()}},sa=oa,la=(0,n.Z)(sa,ta,ia,!1,null,null,null),ra=la.exports,na=function(){var a=this,e=a._self._c;return e("div",{staticClass:"card m-5"},[a._m(0),e("form",{staticClass:"row g-3 m-4"},[e("div",{staticClass:"col-md-3"},[a._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.nombre,expression:"cliente.nombre"}],staticClass:"form-control",attrs:{type:"text",id:"nombre",placeholder:"Ingrese el nombre del cliente"},domProps:{value:a.cliente.nombre},on:{input:function(e){e.target.composing||a.$set(a.cliente,"nombre",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_nombre"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_nombre"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.apellidos,expression:"cliente.apellidos"}],staticClass:"form-control",attrs:{type:"text",id:"apellidos",placeholder:"Ingrese los apellidos del cliente"},domProps:{value:a.cliente.apellidos},on:{input:function(e){e.target.composing||a.$set(a.cliente,"apellidos",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_apellidos"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_apellidos"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(3),e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.telefono,expression:"cliente.telefono"}],staticClass:"form-control",attrs:{type:"number",id:"telefono",placeholder:"Ingrese el teléfono del cliente"},domProps:{value:a.cliente.telefono},on:{input:function(e){e.target.composing||a.$set(a.cliente,"telefono",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_telefono"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_telefono"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(4),e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.cp,expression:"cliente.cp"}],staticClass:"form-control",attrs:{type:"number",id:"cp",placeholder:"Ingrese el código postal del cliente"},domProps:{value:a.cliente.cp},on:{input:function(e){e.target.composing||a.$set(a.cliente,"cp",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_cp"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_cp"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(5),e("select",{directives:[{name:"model",rawName:"v-model",value:a.cliente.provincia,expression:"cliente.provincia"}],staticClass:"form-select",attrs:{id:"provincia"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.cliente,"provincia",e.target.multiple?t:t[0])}}},a._l(a.provincias,(function(t){return e("option",{key:t.provincia,domProps:{value:t.id}},[a._v(" "+a._s(t.provincia)+" ")])})),0),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_provincia"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_provincia"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(6),e("select",{directives:[{name:"model",rawName:"v-model",value:a.cliente.localidad,expression:"cliente.localidad"}],staticClass:"form-select",attrs:{id:"localidad"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.cliente,"localidad",e.target.multiple?t:t[0])}}},a._l(a.municipios,(function(t){return e("option",{key:t.municipio,domProps:{value:t.municipio}},[a._v(" "+a._s(t.municipio)+" ")])})),0),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_localidad"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_localidad"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(7),e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.entidad,expression:"cliente.entidad"}],staticClass:"form-check-input",attrs:{type:"radio",id:"entidad",value:"empresa"},domProps:{checked:a._q(a.cliente.entidad,"empresa")},on:{change:function(e){return a.$set(a.cliente,"entidad","empresa")}}}),e("i",{staticClass:"bi bi-building"}),a._v(" Empresa ")]),e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.cliente.entidad,expression:"cliente.entidad"}],staticClass:"form-check-input",attrs:{type:"radio",id:"entidad",value:"particular"},domProps:{checked:a._q(a.cliente.entidad,"particular")},on:{change:function(e){return a.$set(a.cliente,"entidad","particular")}}}),e("i",{staticClass:"bi bi-person-fill"}),a._v(" Particular ")]),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_entidad"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_entidad"]))])]):a._e()])]),e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-warning",on:{click:function(e){return a.$router.back()}}},[e("i",{staticClass:"bi bi-x-circle"}),a._v(" Cancelar ")]),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),a.actualizarCliente.apply(null,arguments)}}},[e("i",{staticClass:"bi bi-sd-card"}),a._v(" Guardar ")])])])])},ca=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"card-header"},[e("b",[e("i",{staticClass:"bi bi-person-gear"}),a._v(" Editar cliente")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"nombre"}},[e("b",[a._v("Nombre:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"apellidos"}},[e("b",[a._v("Apellidos:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"telefono"}},[e("b",[a._v("Teléfono:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"cp"}},[e("b",[a._v("Código Postal:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"provincia"}},[e("b",[a._v("Provincia:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"localidad"}},[e("b",[a._v("Localidad:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"entidad"}},[e("b",[a._v("Entidad:")])])}],da={data(){return{cliente:{nombre:"",apellidos:"",telefono:"",localidad:"",cp:"",provincia:"",provincia_nombre:"",entidad:"",estado:""},provincias:[],municipios:[],hay_error:!1,errores_de_validacion:{validacion_nombre:"",validacion_apellidos:"",validacion_telefono:"",validacion_localidad:"",validacion_cp:"",validacion_provincia:"",validacion_entidad:"",validacion_estado:""}}},created(){this.fetchClienteDetails()},methods:{fetchClienteDetails(){let a=this.$route.query.id;fetch("PHP/agencia.php/?consultar_cliente="+a).then((a=>a.json())).then((a=>{console.log(a[0]),this.cliente=a[0]})).catch((a=>{console.error(a)}))},async actualizarCliente(){const a=this.provincias.find((a=>a.id===this.cliente.provincia));if(this.cliente.provincia_nombre=a.provincia,this.validacion(),0==this.hay_error){const a={id:this.cliente.id,nombre:this.cliente.nombre,apellidos:this.cliente.apellidos,telefono:this.cliente.telefono,localidad:this.cliente.localidad,cp:this.cliente.cp,provincia:this.cliente.provincia,provincia_nombre:this.cliente.provincia_nombre,entidad:this.cliente.entidad};console.log(a),await fetch("PHP/agencia.php/?actualizar_cliente="+this.$route.params.id,{method:"POST",body:JSON.stringify(a)}).then((a=>a.json())).then((a=>{console.log(a),this.$router.push({name:"DetallesCliente",query:{id:this.cliente.id}})}))}},async consultar_provincia(){const a=await fetch("PHP/agencia.php/?consultar_provincias"),e=await a.json();this.provincias=e},async consultar_municipios(){console.log(this.cliente.provincia);const a=await fetch(`PHP/agencia.php/?consultar_municipios=${this.cliente.provincia}`),e=await a.json();this.municipios=e,console.log(this.municipios)},validacion(){""==this.cliente.nombre||""==this.cliente.apellidos||""==this.cliente.telefono||""==this.cliente.cp||""==this.cliente.provincia||""==this.cliente.localidad||""==this.cliente.entidad?(""==this.cliente.nombre?(this.hay_error=!0,this.errores_de_validacion["validacion_nombre"]="Nombre no puede estar vacio"):this.errores_de_validacion["validacion_nombre"]="",""==this.cliente.apellidos?(this.hay_error=!0,this.errores_de_validacion["validacion_apellidos"]="Apellidos no puede estar vacio"):this.errores_de_validacion["validacion_apellidos"]="",""==this.cliente.telefono?(this.hay_error=!0,this.errores_de_validacion["validacion_telefono"]="Telefono no puede estar vacio"):this.errores_de_validacion["validacion_telefono"]="",""==this.cliente.cp?(this.hay_error=!0,this.errores_de_validacion["validacion_cp"]="Código postal no puede estar vacio"):this.errores_de_validacion["validacion_cp"]="",""==this.cliente.provincia?(this.hay_error=!0,this.errores_de_validacion["validacion_provincia"]="Provincia no puede estar vacio"):this.errores_de_validacion["validacion_provincia"]="",""==this.cliente.localidad?(this.hay_error=!0,this.errores_de_validacion["validacion_localidad"]="Localidad no puede estar vacio"):this.errores_de_validacion["validacion_localidad"]="",""==this.cliente.entidad?(this.hay_error=!0,this.errores_de_validacion["validacion_entidad"]="Entidad no puede estar sin seleccionar"):this.errores_de_validacion["validacion_entidad"]=""):this.hay_error=!1}},watch:{"cliente.provincia":function(){this.consultar_municipios()}},mounted(){this.consultar_provincia()}},_a=da,va=(0,n.Z)(_a,na,ca,!1,null,null,null),pa=va.exports,ua=function(){var a=this,e=a._self._c;return e("div",{staticClass:"card m-5"},[a._m(0),e("form",{staticClass:"row g-3 m-4"},[e("div",{staticClass:"col-md-3"},[a._m(1),e("select",{directives:[{name:"model",rawName:"v-model",value:a.poliza.id_cliente,expression:"poliza.id_cliente"}],staticClass:"form-select",attrs:{id:"id_cliente"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.poliza,"id_cliente",e.target.multiple?t:t[0])}}},a._l(a.clientes,(function(t){return e("option",{key:t.id,domProps:{value:t.id}},[a._v(" "+a._s(t.nombre+" "+t.apellidos)+" ")])})),0),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_id_cliente"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_id_cliente"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:a.poliza.numero_poliza,expression:"poliza.numero_poliza"}],staticClass:"form-control",attrs:{type:"text",id:"numero_poliza"},domProps:{value:a.poliza.numero_poliza},on:{input:function(e){e.target.composing||a.$set(a.poliza,"numero_poliza",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_numero_poliza"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_numero_poliza"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[e("input-group",[e("label",{attrs:{for:"importe_recibo"}},[e("b",[a._v("Importe recibo:")])]),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.poliza.importe_recibo,expression:"poliza.importe_recibo"}],staticClass:"form-control",attrs:{type:"number",id:"importe_recibo"},domProps:{value:a.poliza.importe_recibo},on:{input:function(e){e.target.composing||a.$set(a.poliza,"importe_recibo",e.target.value)}}}),e("span",{staticClass:"input-group-text"},[a._v("€")])]),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_importe_recibo"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_importe_recibo"]))])]):a._e()])])],1),e("div",{staticClass:"col-md-3"},[a._m(3),e("input",{directives:[{name:"model",rawName:"v-model",value:a.poliza.fecha,expression:"poliza.fecha"}],staticClass:"form-control",attrs:{type:"date",id:"fecha"},domProps:{value:a.poliza.fecha},on:{input:function(e){e.target.composing||a.$set(a.poliza,"fecha",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[a.errores_de_validacion["validacion_fecha"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_fecha"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(4),e("select",{directives:[{name:"model",rawName:"v-model",value:a.poliza.estado,expression:"poliza.estado"}],staticClass:"form-select",attrs:{id:"estado"},on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,(function(a){return a.selected})).map((function(a){var e="_value"in a?a._value:a.value;return e}));a.$set(a.poliza,"estado",e.target.multiple?t:t[0])}}},[e("option",{attrs:{value:"cobrada"}},[a._v("Cobrada")]),e("option",{attrs:{value:"a_cuenta"}},[a._v("A cuenta")]),e("option",{attrs:{value:"liquidada"}},[a._v("Liquidada")]),e("option",{attrs:{value:"anulada"}},[a._v("Anulada")]),e("option",{attrs:{value:"pre-anulada"}},[a._v("Pre-anulada")])]),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_estado"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_estado"]))])]):a._e()])]),e("div",{staticClass:"col-md-3"},[a._m(5),e("textarea",{directives:[{name:"model",rawName:"v-model",value:a.poliza.observaciones,expression:"poliza.observaciones"}],staticClass:"form-control",attrs:{id:"observaciones"},domProps:{value:a.poliza.observaciones},on:{input:function(e){e.target.composing||a.$set(a.poliza,"observaciones",e.target.value)}}}),e("div",{staticClass:"col-md-12"},[""!=a.errores_de_validacion["validacion_observaciones"]?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e("span",[a._v(a._s(a.errores_de_validacion["validacion_observaciones"]))])]):a._e()])]),e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-warning",on:{click:function(e){return a.$router.back()}}},[e("i",{staticClass:"bi bi-x-circle"}),a._v(" Cancelar ")]),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return e.preventDefault(),a.actualizarPoliza.apply(null,arguments)}}},[e("i",{staticClass:"bi bi-sd-card"}),a._v(" Guardar ")])])])])},ma=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"card-header"},[e("b",[a._v("Editar poliza")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"id_cliente"}},[e("b",[a._v("Cliente:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"numero_poliza"}},[e("b",[a._v("Numero poliza:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"fecha"}},[e("b",[a._v("Fecha alta:")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"estado"}},[e("b",[a._v("Estado")])])},function(){var a=this,e=a._self._c;return e("label",{attrs:{for:"observaciones"}},[e("b",[a._v("Observaciones:")])])}],ba={data(){return{poliza:{id_cliente:"",numero_poliza:"",importe_recibo:"",fecha:Date,estado:"",observaciones:""},clientes:[],hay_error:!1,errores_de_validacion:{validacion_id_cliente:"",validacion_numero_poliza:"",validacion_importe_recibo:"",validacion_fecha:"",validacion_estado:"",validacion_observaciones:""}}},created(){this.polizaUnica()},methods:{polizaUnica(){let a=this.$route.query.id;fetch("PHP/agencia.php/?consultar_poliza_unica="+a).then((a=>a.json())).then((a=>{console.log(a[0]),this.poliza=a[0]})).catch((a=>{console.error(a)}))},async consultar_clientes(){const a=await fetch("PHP/agencia.php/?consultar_clientes"),e=await a.json();this.clientes=e,console.log(this.clientes)},validacion(){""==this.poliza.id_cliente||""==this.poliza.numero_poliza||""==this.poliza.importe_recibo||""==this.poliza.fecha||""==this.poliza.estado||""==this.poliza.observaciones?(""==this.poliza.id_cliente?(this.hay_error=!0,this.errores_de_validacion["validacion_id_cliente"]="ID cliente no puede estar vacio"):this.errores_de_validacion["validacion_id_cliente"]="",""==this.poliza.numero_poliza?(this.hay_error=!0,this.errores_de_validacion["validacion_numero_poliza"]="Numero poliza no puede estar vacio",console.log("hola")):this.errores_de_validacion["validacion_numero_poliza"]="",""==this.poliza.importe_recibo?(this.hay_error=!0,this.errores_de_validacion["validacion_importe_recibo"]="Importe recibo no puede estar vacio"):this.errores_de_validacion["validacion_importe_recibo"]="",""==this.poliza.fecha?(this.hay_error=!0,this.errores_de_validacion["validacion_fecha"]="La fecha no puede estar vacia"):this.errores_de_validacion["validacion_fecha"]="",""==this.poliza.estado?(this.hay_error=!0,this.errores_de_validacion["validacion_estado"]="Estado no puede estar vacio"):this.errores_de_validacion["validacion_estado"]="",""==this.poliza.observaciones?(this.hay_error=!0,this.errores_de_validacion["validacion_observaciones"]="Observaciones no puede estar vacio"):this.errores_de_validacion["validacion_observaciones"]=""):this.hay_error=!1},async actualizarPoliza(){if(this.validacion(),0==this.hay_error){const a={id:this.poliza.id,id_cliente:this.poliza.id_cliente,numero_poliza:this.poliza.numero_poliza,importe_recibo:this.poliza.importe_recibo,fecha:this.poliza.fecha,estado:this.poliza.estado,observaciones:this.poliza.observaciones};console.log(a),await fetch("PHP/agencia.php/?actualizar_poliza="+this.$route.params.id,{method:"POST",body:JSON.stringify(a)}).then((a=>a.json())).then((a=>{console.log(a),this.$router.push({name:"DetallesCliente",query:{id:this.poliza.id_cliente}})}))}}},mounted(){this.consultar_clientes()}},ha=ba,fa=(0,n.Z)(ha,ua,ma,!1,null,null,null),Ca=fa.exports,ga=function(){var a=this,e=a._self._c;return e("div",{attrs:{id:"contenido"}},[e("h3",[a._v(" Detalles del cliente, "+a._s(a.cliente.nombre)+" "+a._s(a.cliente.apellidos)+" ")]),e("table",{staticClass:"table table-striped table-bordered",attrs:{id:"tabla-clientes"}},[a._m(0),e("tbody",[e("tr",[e("td",[a._v(a._s(a.cliente.nombre))]),e("td",[a._v(a._s(a.cliente.apellidos))]),e("td",[a._v(a._s(a.cliente.telefono))]),e("td",[a._v(a._s(a.cliente.provincia_nombre))]),e("td",[a._v(a._s(a.cliente.localidad))]),e("td",[a._v(a._s(a.cliente.cp))]),e("td",["empresa"===this.cliente_Almacenado.entidad?e("span",[e("i",{staticClass:"bi bi-building"}),a._v(" Empresa")]):e("span",[e("i",{staticClass:"bi bi-person-fill"}),a._v(" Particular")])]),e("td",[e("button",{staticClass:"btn btn-warning",on:{click:function(e){return a.editarCliente(a.cliente.id)}}},[e("i",{staticClass:"bi bi-pencil-square"})]),a._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrope"},on:{click:function(e){return a.almacenarCliente(a.cliente)}}},[e("i",{staticClass:"bi bi-trash-fill"})])])])])]),e("hr"),e("h3",[a._v("Listado de polizas")]),e("button",{staticClass:"btn btn-success my-3",on:{click:function(e){return a.nuevaPolizaCliente(a.cliente.id)}}},[e("i",{staticClass:"bi bi-journal-plus"}),a._v(" Nueva poliza ")]),e("table",{staticClass:"table table-striped table-bordered",attrs:{id:"tabla-polizas"}},[a._m(1),e("tbody",a._l(a.polizas,(function(t){return e("tr",{key:t.id,style:{backgroundColor:"liquidada"===t.estado?"#ffe4e1":"anulada"===t.estado?"#ff6961":"a_cuenta"===t.estado?"#84b6f4":"cobrada"===t.estado?"#77dd77":"pre-anulada"===t.estado?"#ffca99":""}},[e("td",[a._v(a._s(t.numero_poliza))]),e("td",[a._v(a._s(t.importe_recibo)+" €")]),e("td",[a._v(a._s(a._f("date")(t.fecha,"DD-MM-YYYY")))]),e("td",["liquidada"===t.estado?e("span",[a._v("Liquidada")]):a._e(),"anulada"===t.estado?e("span",[a._v("Anulada")]):a._e(),"a_cuenta"===t.estado?e("span",[a._v("A cuenta")]):a._e(),"cobrada"===t.estado?e("span",[a._v("Cobrada")]):a._e(),"pre-anulada"===t.estado?e("span",[a._v("Pre-anulada")]):a._e()]),e("td",[a._v(a._s(t.observaciones))]),e("td",[t.estado?e("button",{staticClass:"btn btn-warning border border-dark",on:{click:function(e){return a.editarPoliza(t.id)}}},[e("i",{staticClass:"bi bi-pencil-square"})]):a._e(),a._v("  "),t.estado&&"anulada"!==t.estado?e("button",{staticClass:"btn btn-danger border border-dark",attrs:{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},on:{click:function(e){return a.almacenarPoliza(t)}}},[e("i",{staticClass:"bi bi-trash-fill"})]):a._e()])])})),0)]),e("div",{staticClass:"modal fade",attrs:{id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Confirmación de anulacion de la poliza "),e("b",[a._v(a._s(this.poliza_Almacenado.numero_poliza))])]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),e("div",{staticClass:"modal-body"},[a._v(" ¿Esta seguro de querer anular esta poliza? "),e("p"),e("p",[e("b",[a._v("Cliente: ")]),a._v(" "+a._s(this.cliente.nombre)+" "+a._s(this.cliente.apellidos)+" ")]),e("p",[e("b",[a._v("Numero poliza:")]),a._v(" "+a._s(this.poliza_Almacenado.numero_poliza)+" ")]),e("p",[e("b",[a._v("Importe de recibo:")]),a._v(" "+a._s(this.poliza_Almacenado.importe_recibo)+" € ")]),e("p",[e("b",[a._v("Fecha:")]),a._v(" "+a._s(a._f("date")(this.poliza_Almacenado.fecha,"DD-MM-YYYY"))+" ")]),e("p",[e("b",[a._v("Estado: ")]),"liquidada"===this.poliza_Almacenado.estado?e("span",[a._v("Liquidada")]):a._e(),"anulada"===this.poliza_Almacenado.estado?e("span",[a._v("Anulada")]):a._e(),"a_cuenta"===this.poliza_Almacenado.estado?e("span",[a._v("A cuenta")]):a._e(),"cobrada"===this.poliza_Almacenado.estado?e("span",[a._v("Cobrada")]):a._e(),"pre-anulada"===this.poliza_Almacenado.estado?e("span",[a._v("Pre-anulada")]):a._e()]),e("p",[e("b",[a._v("Observaciones:")]),a._v(" "+a._s(this.poliza_Almacenado.observaciones)+" ")])]),e("div",{staticClass:"modal-footer"},[a._m(2),e("button",{staticClass:"btn btn-danger",attrs:{"data-bs-dismiss":"modal"},on:{click:function(e){return a.borrarPoliza(a.poliza_Almacenado.id)}}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Anular ")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"staticBackdrope","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"staticBackdropLabel"}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Confirmación de baja de "),e("b",[a._v(a._s(this.cliente_Almacenado.nombre))]),a._v(" "),e("b",[a._v(a._s(this.cliente_Almacenado.apellidos))])]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal","aria-label":"Close"}})]),e("div",{staticClass:"modal-body"},[a._v(" ¿Esta seguro de querer dar de baja a este cliente? "),e("p"),e("p",[e("b",[a._v("Nombre:")]),a._v(" "+a._s(this.cliente_Almacenado.nombre))]),e("p",[e("b",[a._v("Apellidos:")]),a._v(" "+a._s(this.cliente_Almacenado.apellidos))]),e("p",[e("b",[a._v("Teléfono:")]),a._v(" "+a._s(this.cliente_Almacenado.telefono))]),e("p",[e("b",[a._v("Localidad:")]),a._v(" "+a._s(this.cliente_Almacenado.localidad))]),e("p",[e("b",[a._v("Código Postal:")]),a._v(" "+a._s(this.cliente_Almacenado.cp))]),e("p",[e("b",[a._v("Provincia:")]),a._v(" "+a._s(this.cliente_Almacenado.provincia_nombre)+" ")]),e("p",[e("b",[a._v("Entidad: ")]),"empresa"===this.cliente_Almacenado.entidad?e("span",[e("i",{staticClass:"bi bi-building"}),a._v(" Empresa")]):e("span",[e("i",{staticClass:"bi bi-person-fill"}),a._v(" Particular")])])]),e("div",{staticClass:"modal-footer"},[a._m(3),e("button",{staticClass:"btn btn-danger",attrs:{"data-bs-dismiss":"modal"},on:{click:function(e){return a.borrarCliente(a.cliente_Almacenado.id)}}},[e("i",{staticClass:"bi bi-trash-fill"}),a._v(" Dar de Baja ")])])])])]),e("button",{staticClass:"btn btn-warning",on:{click:function(e){return a.$router.back()}}},[e("i",{staticClass:"bi bi-arrow-left"}),a._v(" Volver atras ")])])},za=[function(){var a=this,e=a._self._c;return e("thead",{staticClass:"thead-dark"},[e("tr",{staticStyle:{"background-color":"#d8f8e1"}},[e("th",[a._v("Nombre")]),e("th",[a._v("Apellidos")]),e("th",[a._v("Teléfono")]),e("th",[a._v("Provincia")]),e("th",[a._v("Localidad")]),e("th",[a._v("Código Postal")]),e("th",[a._v("Entidad")]),e("th",[a._v("Opciones")])])])},function(){var a=this,e=a._self._c;return e("thead",{staticClass:"thead-dark"},[e("tr",{staticStyle:{"background-color":"#cce5ff"}},[e("th",[a._v("Numero Poliza")]),e("th",[a._v("Importe de recibo")]),e("th",[a._v("Fecha")]),e("th",[a._v("Estado")]),e("th",[a._v("Observaciones")]),e("th",[a._v("Opciones")])])])},function(){var a=this,e=a._self._c;return e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e("i",{staticClass:"bi bi-arrow-left"}),a._v(" Cerrar ")])},function(){var a=this,e=a._self._c;return e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-bs-dismiss":"modal"}},[e("i",{staticClass:"bi bi-arrow-left"}),a._v(" Cerrar ")])}],ya={data(){return{cliente:{},polizas:[],poliza_Almacenado:[],cliente_Almacenado:[]}},filters:{date:function(a){return a?new Date(a).toLocaleDateString("es-ES"):""}},created(){this.fetchClienteDetails(),this.fetchPolizaDetails()},methods:{editarCliente(a){this.$router.push({name:"EditarCliente",query:{id:a}})},editarPoliza(a){this.$router.push({name:"EditarPoliza",query:{id:a}})},borrarPoliza(a){console.log(a),fetch("PHP/agencia.php/?borrar_poliza="+a).then((a=>a.json())).then((a=>{console.log(a),this.fetchPolizaDetails()})).catch(console.log)},almacenarPoliza(a){console.log(a),this.poliza_Almacenado=a},fetchClienteDetails(){let a=this.$route.query.id;fetch("PHP/agencia.php/?consultar_cliente="+a).then((a=>a.json())).then((a=>{console.log(a[0]),this.cliente=a[0]})).catch((a=>{console.error(a)}))},fetchPolizaDetails(){let a=z()("#tabla-polizas").DataTable();a.destroy();let e=this.$route.query.id;fetch("PHP/agencia.php/?consultar_poliza="+e).then((a=>a.json())).then((a=>{console.log(a),this.polizas=a,this.$nextTick((function(){z()("#tabla-polizas").DataTable({pageLength:5,lengthMenu:[5,10,25,50,100],order:[[2,"desc"]]})}))})).catch((a=>{console.error(a)}))},borrarCliente(a){console.log(a),fetch("PHP/agencia.php/?borrar="+a).then((a=>a.json())).then((a=>{console.log(a),this.$router.push({name:"ListarCliente"})})).catch(console.log)},almacenarCliente(a){console.log(a),this.cliente_Almacenado=a},nuevaPolizaCliente(a){this.$router.push({name:"NuevaPolizaCliente",query:{id:a}})}}},Pa=ya,Aa=(0,n.Z)(Pa,ga,za,!1,null,null,null),ka=Aa.exports;i.ZP.use(_.ZP),i.ZP.config.productionTip=!1;const wa=new _.ZP({routes:[{path:"/",name:"LoginUsuario",component:h},{path:"/listarcliente",name:"ListarCliente",component:k,meta:{requiresAuth:!0}},{path:"/listarpoliza",name:"ListarPoliza",component:$,meta:{requiresAuth:!0}},{path:"/listarpolizafiltrado",name:"ListarPolizaFiltrado",component:I,meta:{requiresAuth:!0}},{path:"/listarfiltrado",name:"ListarFiltrado",component:M,meta:{requiresAuth:!0}},{path:"/altacliente",name:"AltaCliente",component:V,meta:{requiresAuth:!0}},{path:"/altapoliza",name:"AltaPoliza",component:ea,meta:{requiresAuth:!0}},{path:"/nuevapolizacliente",name:"NuevaPolizaCliente",component:ra,meta:{requiresAuth:!0}},{path:"/editarcliente",name:"EditarCliente",component:pa,meta:{requiresAuth:!0}},{path:"/editarpoliza",name:"EditarPoliza",component:Ca,meta:{requiresAuth:!0}},{path:"/detallescliente",name:"DetallesCliente",component:ka,meta:{requiresAuth:!0}}]});wa.beforeEach(((a,e,t)=>{a.matched.some((a=>a.meta.requiresAuth))?localStorage.getItem("estoyLogueado")?t():t({path:"/",query:{redirect:a.fullPath}}):t()})),new i.ZP({router:wa,render:a=>a(d)}).$mount("#app")}},e={};function t(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return a[i].call(s.exports,s,s.exports,t),s.exports}t.m=a,function(){var a=[];t.O=function(e,i,o,s){if(!i){var l=1/0;for(d=0;d<a.length;d++){i=a[d][0],o=a[d][1],s=a[d][2];for(var r=!0,n=0;n<i.length;n++)(!1&s||l>=s)&&Object.keys(t.O).every((function(a){return t.O[a](i[n])}))?i.splice(n--,1):(r=!1,s<l&&(l=s));if(r){a.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=a.length;d>0&&a[d-1][2]>s;d--)a[d]=a[d-1];a[d]=[i,o,s]}}(),function(){t.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return t.d(e,{a:e}),e}}(),function(){t.d=function(a,e){for(var i in e)t.o(e,i)&&!t.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:e[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)}}(),function(){t.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})}}(),function(){var a={143:0};t.O.j=function(e){return 0===a[e]};var e=function(e,i){var o,s,l=i[0],r=i[1],n=i[2],c=0;if(l.some((function(e){return 0!==a[e]}))){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(n)var d=n(t)}for(e&&e(i);c<l.length;c++)s=l[c],t.o(a,s)&&a[s]&&a[s][0](),a[s]=0;return t.O(d)},i=self["webpackChunkagencia_de_seguros"]=self["webpackChunkagencia_de_seguros"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(5007)}));i=t.O(i)})();
//# sourceMappingURL=app.b258e990.js.map